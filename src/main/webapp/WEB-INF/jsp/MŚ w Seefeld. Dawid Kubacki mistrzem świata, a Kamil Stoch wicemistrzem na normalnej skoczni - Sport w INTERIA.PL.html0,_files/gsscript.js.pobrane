function gsm_gemius_parameters_fn(){var d=document,href=new String(d.location.href),ref,f=0,fv="-";if(ref=d.referrer?new String(d.referrer):"","undefined"!=typeof Error){var fo;eval('try { f=(d==top.document)?1:2; if (typeof top.document.referrer=="string") { ref=top.document.referrer } } catch(e) {f=3;}'),eval('try { fv=navigator.plugins["Shockwave Flash"].description; } catch (e) {}'),eval('if (typeof ActiveXObject!="undefined") { try { fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"); } catch(e) { try { fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"); fv="X"; fo.AllowScriptAccess="always"; } catch(e) { if (fv=="X") { fv="WIN 6,0,20,0"; }} try { fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"); } catch(e) {} } if ((fv=="-" || fv=="X") && fo) { fv=fo.GetVariable("$version"); }}')}var url="&fr="+f+"&fv="+escape(fv)+"&tz="+(new Date).getTimezoneOffset()+"&href="+escape(href.substring(0,1024))+"&ref="+escape(ref.substring(0,1024));if(screen){var s=screen;s.width&&(url+="&screen="+s.width+"x"+s.height),s.colorDepth&&(url+="&col="+s.colorDepth)}return url}function gsm_gemius_escape(a,b){function c(a){var b="0123456789ABCDEF";return b.charAt(a>>4)+b.charAt(15&a)}for(var d,e,f,g,h="",i=0;i<a.length;i++)if(!((d=a.charCodeAt(i))>=56320&&d<57344)){if(d>=55296&&d<56320){if(++i>=a.length)continue;if((e=a.charCodeAt(i))<56320||e>=57344)continue;d=e-56320+(d-55296<<10)+65536}if(d<128?(f=escape(String.fromCharCode(d)).replace(/\+/g,"%2B").replace(/\//g,"%2F"),g=d<=32?3:1):d<2048?(f="%"+c(d>>6|192)+"%"+c(63&d|128),g=2):d<65536?(f="%"+c(d>>12|224)+"%"+c(d>>6&63|128)+"%"+c(63&d|128),g=3):d<2097152?(f="%"+c(d>>18|240)+"%"+c(d>>12&63|128)+"%"+c(d>>6&63|128)+"%"+c(63&d|128),g=4):(f="",g=0),(b-=g)<0)return h;h+=f}return h}function gsm_gemius_sarg_hit(a){var b=gsm_gemius_host+(new Date).getTime()+"/redot.gif?l=16&id="+gsm_gemius_identifier+"&sarg="+a+gsm_gemius_parameters;void 0===window.gemius_sarg_images&&(window.gemius_sarg_images=new Array);var c=window.gemius_sarg_images.length;"undefined"==typeof gemius_sarg_sem&&(gemius_sarg_sem=0),c<=gemius_sarg_sem&&(window.gemius_sarg_images[c]=new Image,window.gemius_sarg_images[c].src=b),gemius_sarg_sem++}function gsm_gemius_generate_STM(){var a=(new Date).getTime().toString(36)+Math.round(1e8*Math.random()).toString(36)+Math.round(1e8*Math.random()).toString(36);return gsm_gemius_sarg_hit("SESSION_TO_MATCH="+a),a}function gsm_gemius_url(a,b,c,d,e,f){f=void 0!==f?f:"";for(var g=a+"?SESSION_TO_MATCH="+b+"&MATERIAL_IDENTIFIER="+c.toString(),h=0;h<d.length;++h)g+="&"+d[h][0]+"="+d[h][1];return g+="&ENCODING="+e+f}var gsm_gemius_proto=document.location&&document.location.protocol&&"https:"==document.location.protocol?"https://":"http://";"undefined"==typeof gsm_gemius_hitcollector&&(gsm_gemius_hitcollector="pro.hit.gemius.pl");var gsm_gemius_host=gsm_gemius_proto+gsm_gemius_hitcollector+"/_",gsm_gemius_parameters=gsm_gemius_parameters_fn();if(!gSmDebug)var gSmDebug=new function(){this.DEBUGLEVEL_CONNECTOR="connector",this.DEBUGLEVEL_LOG="log",this.DEBUGLEVEL_INPUT="input",this.DEBUGLEVEL_INTERNAL="internal",this.DEBUGLEVEL_OUTPUT="output",this.ACTIONNAME_NEW_STREAM="newStream",this.ACTIONNAME_EVENT="event",this.ACTIONNAME_CLOSE_STREAM="closeStream",this.ACTIONNAME_SEND_HIT="sendHit",this.ACTIONNAME_LOG="log",this._connectionId="_"+(new Date).getTime().toString(36)+"_"+Math.floor(99999*Math.random()).toString(36),this._isEliminated=!1,this._isRegistered=!1,this._registerInterval=Math.floor(2e3+1e3*Math.random()),this._actionsBuffer=new Array,this.init=function(){setTimeout("gSmDebug._sendRegisterRequest()",this._registerInterval)},this.receiveConfirmation=function(){this.send(this.DEBUGLEVEL_CONNECTOR,"","",this.ACTIONNAME_LOG,["<PLAYER>["+this._connectionId+"] >> Confirmation received."]),this._isRegistered=!0,setTimeout("gSmDebug._releaseEventsBuffer()",1)},this.send=function(a,b,c,d,e){if(!this._isEliminated){var f=new Object;f.debugLevel=a,f.connectionId=this._connectionId,f.timestamp=(new Date).getTime(),f.playerId=b,f.contentId=c,f.actionName=d,f.actionData=e,this._isRegistered?this._sendActionToDebugger(f):this._actionsBuffer.push(f)}},this._sendRegisterRequest=function(){gSmDebug._isRegistered||(gSmDebug.send(gSmDebug.DEBUGLEVEL_CONNECTOR,"","",gSmDebug.ACTIONNAME_LOG,["<PLAYER>["+gSmDebug._connectionId+"] >> Send to <DEBUGGER>.register("+gSmDebug._connectionId+")."]),gSmDebug._getDebugger()&&gSmDebug._getDebugger().register(gSmDebug._connectionId),gSmDebug._registerInterval+=Math.floor(1e3+500*Math.random()),gSmDebug._registerInterval<6e4&&setTimeout("gSmDebug._sendRegisterRequest()",gSmDebug._registerInterval))},this._releaseEventsBuffer=function(){for(var a=0;a<gSmDebug._actionsBuffer.length;a++)gSmDebug._sendActionToDebugger(gSmDebug._actionsBuffer[a]);gSmDebug._actionsBuffer=new Array},this._sendActionToDebugger=function(a){this._getDebugger()&&this._getDebugger().receiveAction(a.debugLevel,a.connectionId,a.timestamp,a.playerId,a.contentId,a.actionName,a.actionData)},this._getDebugger=function(){return document.getElementById("gSmDebugger")},this.init()};if(!gSmUtil)var gSmUtil=new function(){this._protectedInterval=100,this._oldSystemTime=(new Date).getTime(),this._oldSystemTimeTmp=(new Date).getTime(),this._newSystemTime=(new Date).getTime(),this._currentTime=0,this._delta=0,this.init=function(){setTimeout("gSmUtil._updateProtectedTime()",this._protectedInterval)},this.getTimeSec=function(){return this._currentTime},this.isOpera=function(){return window.opera},this.isSafari=function(){return!this.isChrome()&&-1!=navigator.userAgent.toLowerCase().indexOf("safari")},this.isChrome=function(){return-1!=navigator.userAgent.toLowerCase().indexOf("chrome")},this.isIE=function(){return-1!=navigator.appName.toLowerCase().indexOf("microsoft")},this.isFF=function(){return-1!=navigator.userAgent.toLowerCase().indexOf("firefox")},this.getBytesLength=function(a){return encodeURIComponent(a).replace(/%../g,"x").length},this.limitBytesLength=function(a,b,c){var d=0,e="";a=this._normalizeString(a,c);for(var f=0;f<a.length;f++){if((d+=this.getBytesLength(a.charAt(f)))>b)return e;e+=a.charAt(f)}return e},this.sendHit=function(a,b,c,d,e){void 0===window.gsm_gemius_images&&(window.gsm_gemius_images=new Array);var f=window.gsm_gemius_images.length;window.gsm_gemius_images[f]=new Image,window.gsm_gemius_images[f].src=a+(new Date).getTime()+"/redot.gif?id="+b+"&sargencoding="+c+"&sarg="+gsm_gemius_escape(d,1023)+e},this._updateProtectedTime=function(){setTimeout("gSmUtil._updateProtectedTime()",gSmUtil._protectedInterval),gSmUtil._newSystemTime=(new Date).getTime();var a=gSmUtil._newSystemTime-gSmUtil._oldSystemTimeTmp-gSmUtil._protectedInterval;(a<-1e3||a>6e4)&&(gSmUtil._delta-=a),gSmUtil._oldSystemTimeTmp=gSmUtil._newSystemTime,gSmUtil._currentTime=Math.floor((gSmUtil._newSystemTime-gSmUtil._oldSystemTime+gSmUtil._delta)/1e3)},this._normalizeString=function(a,b){for(var c="",d=0;d<a.length;d++){for(var e=!0,f=0;f<b.length;f++)if(a.charAt(d)==b[f]){e=!1;break}c+=e?a.charAt(d):" "}return c},this.init()};if(!gSmNoUnload)var gSmNoUnload=new function(){this.COOKIE_LIFE_TIME_IN_DAYS=4,this.STREAM_HISTORY_LIFE_TIME=2592e5,this.STREAM_HISTORY_BUFFOR_TIME=2e3,this.UPDATESTREAM_INTERVAL=500,this.STREAMS_SLOTS_LIMIT=3,this._streams=[],this._streamsMatch={},this._cookieOldVal=null,this.init=function(){this.hasUnload()||(this._sendAllStreams(),setTimeout("gSmNoUnload._updateStreams()",this.UPDATESTREAM_INTERVAL))},this.hasUnload=function(){return!(gSmUtil.isOpera()||gSmUtil.isChrome()||gSmUtil.isSafari())},this.addStream=function(a,b,c){if(!this.hasUnload()){var d=(new Date).getTime()+""+Math.round(1e3*Math.random());return this._streams.push({cookieId:d,stream:a,identifier:b,hitcollector:c,startTime:(new Date).getTime(),parameters:gsm_gemius_parameters}),d}},this.updateStream=function(a){if(!this.hasUnload()){var b,c,d,e,f,g,h;b=this._getStream(a),d=b.identifier,c=b.hitcollector,parameters=b.parameters,e=gSmConfig.ENCODING,g=b.startTime,h=b.stream.getCurrentPackage(),f=(new Date).getTime(),this._writeStream(a,c,d,e,g,f,h,parameters)}},this._getStream=function(a){for(var b=0;b<this._streams.length;b++)if(this._streams[b].cookieId==a)return this._streams[b];return null},this._updateStreams=function(){setTimeout("gSmNoUnload._updateStreams()",this.UPDATESTREAM_INTERVAL);for(var a=0;a<gSmNoUnload._streams.length;a++)gSmNoUnload.updateStream(gSmNoUnload._streams[a].cookieId)},this._writeStream=function(a,b,c,d,e,f,g,h){this._createCookie(a,escape(b)+"|"+escape(c)+"|"+escape(d)+"|"+escape(e)+"|"+escape(f)+"|"+escape(g)+"|"+escape(h))},this._sendAllStreams=function(){var a=this._getAllCookies();for(var b in a)if((new Date).getTime()-a[b].lastTime>this.STREAM_HISTORY_BUFFOR_TIME){var c=(new Date).getTime()-a[b].startTime;if(c>0&&c<this.STREAM_HISTORY_LIFE_TIME){var d=a[b].sargData.split("|"),e=d[d.length-1].split(";");0==e[e.length-1][0]&&d.splice(d.length-1,1),d.length>=8&&(d[6]=Number(d[6])+Math.round(c/1e3),a[b].sargData=d.join("|"),gSmUtil.sendHit(a[b].hitcollector,a[b].identifier,a[b].encoding,a[b].sargData,a[b].parameters),gSmDebug.send(gSmDebug.DEBUGLEVEL_OUTPUT,"","",gSmDebug.ACTIONNAME_SEND_HIT,[a[b].sargData,"Cookie"]))}this._eraseCookie(b)}},this._getAllCookies=function(){for(var a,b=document.cookie.split(";"),c={},d=0;d<b.length;d++){var e=b[d].split("=");e[0].split("gsm_").length>1&&(a=e[1].split("|"),c[e[0]]={hitcollector:unescape(a[0]),identifier:unescape(a[1]),encoding:unescape(a[2]),startTime:unescape(a[3]),lastTime:unescape(a[4]),sargData:unescape(a[5]),parameters:unescape(a[6])})}return c},this._createCookie=function(a,b,c){c||(c=!1),setTimeout("gSmNoUnload._createCookieThread('"+a+"','"+b+"',"+c+")",1)},this._getCookieSlot=function(){this._sendAllStreams();for(var a=[],b=0;b<this.STREAMS_SLOTS_LIMIT;b++)a[b]=!0;var c=this._getAllCookies();for(var d in c){a[d.split("gsm_c")[1]]=!1}for(var b=0;b<a.length;b++)if(a[b])return b;return null},this._createCookieThread=function(a,b,c){var d=a;if(!c){if(null==this._streamsMatch[a]){var e=this._getCookieSlot();if(null==e)return;this._streamsMatch[a]="gsm_c"+e}d=this._streamsMatch[a]}var f=c?-1:this.COOKIE_LIFE_TIME_IN_DAYS,g=new Date;g.setTime(g.getTime()+24*f*60*60*1e3);var h="; expires="+g.toGMTString(),i=d+"="+b+h+"; path=/";i!=this._cookieOldVal&&(document.cookie=i,this._cookieOldVal=i)},this._eraseCookie=function(a){this._createCookie(a,"",!0)},this.init()};var gSmStream=function(a,b){this._contentId=a,this._contentIdFormated=gSmUtil.limitBytesLength(a,gSmConfig.MAX_ID_LENGTH,gSmConfig.ID_RES),this._player=b,this.init=function(){this._closing=!1,this.duration=null,this.time=null,this.customPackageString="",this.additionalPackageString="",this.lastPlayTime=null,this.lastEvent="",this.lastPlayEndTime=null,this.firstTimeStamp=gSmUtil.getTimeSec(),this.lastTimeStamp=gSmUtil.getTimeSec(),this.isPlaying=!1,this.forcedClose=!1,this.controlBreak=!1,this.eventString="",this.eventId="",this.viewId="",this.cookieId="",this.gSmId="",this.gSmHost="",this.treeIdString="",this.realPlaying=!1},this.init(),this.newStream=function(a,b,c,d,e,f){this.init(),this.gSmId=void 0==d||null==d?gsm_gemius_identifier:d,this.gSmHc=void 0==e||null==e?gsm_gemius_host:e+"/_",this.cookieId=gSmNoUnload.addStream(this,this.gSmId,this.gSmHc),this.duration=a>0?Math.round(a):-1,this.time=0,this.customPackageString=this._formatPackage(b),this.additionalPackageString=this._formatPackage(c),this.treeIdString=this._formatTree(f),gSmDebug.send(gSmDebug.DEBUGLEVEL_INTERNAL,this._player.playerId,this._contentId,gSmDebug.ACTIONNAME_NEW_STREAM,[this.duration,this.customPackageString,this.additionalPackageString,this.treeIdString])},this.event=function(a,b){if(this.forcedClose=!1,this.time=a,this.lastEvent!=b)switch(gSmDebug.send(gSmDebug.DEBUGLEVEL_INTERNAL,this._player.playerId,this._contentId,gSmDebug.ACTIONNAME_EVENT,[Math.round(a),b]),b){case"playing":if(this.isPlaying)return;""==this.eventString&&(this.firstTimeStamp=gSmUtil.getTimeSec()),this.lastTimeStamp=gSmUtil.getTimeSec(),this.lastPlayTime=a,this.firsPlayingEvent||this._sendFirsPlayingEvent(),this.eventId="p",this.realPlaying=!0,this.isPlaying=!0,this.viewId="";break;case"complete":this.eventId="c",this.lastPlayEndTime=a,this.sendStream(),this.isPlaying=!1,this.viewId="",this.firsPlayingEvent=!1;break;default:switch(b){case"paused":this.eventId="p";break;case"stopped":this.eventId="s";break;case"buffering":this.eventId="b";break;case"seekingStarted":this.eventId="r";break;default:this.eventId="p"}if(null==this.lastPlayTime)return;this.lastPlayEndTime=a,this.controlBreak="length";var c=this._getCurrEvent();this._checkBufforAndSendHit(c)||(this.eventString+=this._makeCurrEventViewId(c)),this.isPlaying=!1}},this.closeStream=function(a){this._closing=!0,this.time=a,this.lastPlayEndTime=a,gSmDebug.send(gSmDebug.DEBUGLEVEL_INTERNAL,this._player.playerId,this._contentId,gSmDebug.ACTIONNAME_CLOSE_STREAM,[Math.round(this.time)]),this.sendStream(),this.isPlaying=!1},this.getCurrentPackage=function(){var a=this._getEvents(!0),b=""!=this.viewId?"#"+this.viewId:"";return this._getFormatedData()+"|"+Math.round(this.lastTimeStamp-this.firstTimeStamp)+";"+Math.round(this.lastPlayTime)+";"+Math.round(this._getPlayLength(!0))+b+a},this.closeStreamForced=function(){this._closing=!0,gSmDebug.send(gSmDebug.DEBUGLEVEL_INTERNAL,this._player.playerId,this._contentId,gSmDebug.ACTIONNAME_CLOSE_STREAM,[Math.round(this.time)]),this.forcedClose=!0,this.sendStream(),this.isPlaying=!1},this.sendStream=function(a){this.controlBreak=void 0==a||null==a?"":a,"time"==this.controlBreak&&this._getCurrEvent()+this.eventString!=""&&""==this.viewId&&(this.viewId=gemiusStream.newViewId());var b=this._getPlayLength(),c=this._getCurrEvent();this._checkBufforAndSendHit(c)||(this.eventString+=this._makeCurrEventViewId(c),this._sendHit(""),this.lastPlayTime+=b),"time"==this.controlBreak&&(this.realPlaying=!1)},this.hasEvent=function(){return this.forcedClose=!0,this.eventString+this._getCurrEvent()!=""},this._formatPackage=function(a){for(var b,c,d="",e=a.length>gSmConfig.MAX_CRITERIONS?gSmConfig.MAX_CRITERIONS:a.length,f=0;f<e;f++){switch(typeof a[f]){case"string":a[f]=a[f].split("=");break;case"object":a[f].length||(a[f]=[a[f].name,a[f].value]);break;default:a[f]=[]}2==a[f].length&&(b=gSmUtil.limitBytesLength(a[f][0],gSmConfig.MAX_CRITERION_LENGTH,gSmConfig.CRITERION_RES),c=gSmUtil.limitBytesLength(a[f][1],gSmConfig.MAX_CATEGORY_LENGTH,gSmConfig.CATEGORY_RES),f>0&&(d+=";"),d+=b+"="+c)}return d},this._formatTree=function(a){for(var b=a.join(",");a.length>0&&gSmUtil.getBytesLength(b)>gSmConfig.MAX_TREE_ID_LENGTH;)a.pop(),b=a.join(",");return b},this._checkBufforAndSendHit=function(a){return gSmUtil.getBytesLength(this._getFormatedData())+a.length+1>=gSmConfig.MAX_LOG_LENGTH+gSmConfig.VIEW_ID_LENGTH&&(this._sendHit(a),!0)},this._sendFirsPlayingEvent=function(){this._sendHit("",!0),this.firsPlayingEvent=!0},this._makeCurrEventViewId=function(a){return a+(""!=this.viewId&&""!=a?"#"+this.viewId:"")},this._getPlayLength=function(a){if(void 0!=a&&null!=a||(a=!1),0==this.isPlaying)return 0;var b,c,d;return b=gSmUtil.getTimeSec()-this.lastTimeStamp,c=this.lastPlayEndTime-this.lastPlayTime,d=Math.round(this.lastPlayEndTime)-Math.round(this.lastPlayTime),1==this.forcedClose||-1==this.duration||""!=this.controlBreak||1==a?b:1==d||0==d?d:b<=0?c:c<=0?b:Math.min(b,c)},this._getEvents=function(a){a=void 0!=a&&a;var b="";return""==this.controlBreak||"length"==this.controlBreak||a?b=(""!=this.viewId?"":"^p")+(this.forcedClose||a||this._closing?"$q":"$"+this.eventId):(b=this.realPlaying?"^p":"","p"!=this.eventId&&(b="^"+this.eventId)),b},this._getCurrEvent=function(){var a=Math.round(this._getPlayLength());return a>0?"|"+Math.round(this.lastTimeStamp-this.firstTimeStamp)+";"+Math.round(this.lastPlayTime)+";"+a+this._getEvents():""},this._sendHit=function(a,b){if(void 0==b&&(b=!1),""!=this.eventString||""!=a||0!=b){if(this.eventString+=a,"c"==this.eventId){var c=this.eventString.split("|"),d=c[c.length-1],e=d.indexOf("$"),f=d.substring(0,e)+"$c"+d.substring(e+2,d.length);c[c.length-1]=f,this.eventString=c.join("|")}var g=this._getFormatedData(b);this.eventString="",this.firstTimeStamp=gSmUtil.getTimeSec(),this.lastTimeStamp=gSmUtil.getTimeSec(),gSmUtil.sendHit(this.gSmHc,this.gSmId,gSmConfig.ENCODING,g,gsm_gemius_parameters),gSmDebug.send(gSmDebug.DEBUGLEVEL_OUTPUT,this._player.playerId,this._contentId,gSmDebug.ACTIONNAME_SEND_HIT,[g]),gSmNoUnload.updateStream(this.cookieId)}},this._getFormatedData=function(a){var b="",c=Math.round(gSmUtil.getTimeSec()-this.firstTimeStamp),d="";return a&&(d="|"+Math.round(gSmUtil.getTimeSec()-this.firstTimeStamp)+";"+Math.round(this.lastPlayTime)+";0!f"),b="v="+gSmConfig.VERSION+"|"+this.treeIdString+"|"+this._contentIdFormated+"|"+this.duration+"|"+this.customPackageString+"|"+this.additionalPackageString+"|"+c+d,b+=this.eventString}},gSmPlayer=function(a){this.playerId=a,this._streamsArray=new Array,this.newStream=function(a,b,c,d,e,f,g){this._getStream(a,!0).newStream(b,c,d,e,f,g)},this.event=function(a,b,c){var d=this._getStream(a);null!=d&&d.event(b,c)},this.closeStream=function(a,b){var c=this._getStream(a);null!=c&&(c.closeStream(b),this._removeStream(a))},this.sendAllStreams=function(a){for(var b=0;b<this._streamsArray.length;b++)this._streamsArray[b].sendStream(a)},this.checkAllStreams=function(){for(var a=0;a<this._streamsArray.length;a++)if(this._streamsArray[a].hasEvent())return!0;return!1},this.closeAllStreams=function(){for(var a=0;a<this._streamsArray.length;a++)this._streamsArray[a].closeStreamForced()},this._getStream=function(a,b){b=!!b;for(var c=null,d=0;d<this._streamsArray.length;d++)this._streamsArray[d]._contentId==a&&(c=this._streamsArray[d]);return null==c&&b&&(c=new gSmStream(a,this),this._streamsArray.push(c)),c},this._removeStream=function(a){for(var b=0;b<this._streamsArray.length;b++)this._streamsArray[b].contentId==a&&(delete this._streamsArray[b],this._streamsArray.splice(b,1))}};if(!gSmConfig)var gSmConfig=new function(){this.VERSION=6,this.MAX_CRITERIONS=6,this.MAX_CRITERION_LENGTH=16,this.MAX_CATEGORY_LENGTH=64,this.MAX_TREE_ID_LENGTH=64,this.MAX_ID_LENGTH=64,this.VIEW_ID_LENGTH=16,this.ID_RES=["|","*","\n","\t","\r"],this.CRITERION_RES=["|","*","\n","\t","\r",";","=","/","#"],this.CATEGORY_RES=["|","*","\n","\t","\r",";","=","/","#"],this.TIMEOUT=300,this.MAX_LOG_LENGTH=990,this.ENCODING="utf-8",this.setEncoding=function(a){this.ENCODING=a}};if(!gemiusStream)var gemiusStream=new function(){this._lastTimeCheck=gSmUtil.getTimeSec(),this._viewId=0,this.init=function(){this.session=(new Date).getTime().toString(36)+Math.round(1e8*Math.random()).toString(36)+Math.round(1e8*Math.random()).toString(36),this.playersArray=new Array,gSmNoUnload.hasUnload()&&(window.addEventListener?window.addEventListener("unload",this.onUnload,!0):window.attachEvent&&window.attachEvent("onunload",this.onUnload)),setTimeout("gemiusStream._timeCheck()",1e3)},this.newStream=function(a,b,c,d,e,f,g,h){if(gSmDebug.send(gSmDebug.DEBUGLEVEL_INPUT,a,b,gSmDebug.ACTIONNAME_NEW_STREAM,[c,d,h,e]),null!=a&&null!=b&&void 0!=a&&void 0!=b){null==d&&(d=new Array),null==e&&(e=new Array),null==h&&(h=new Array);this._getPlayer(a).newStream(b,c,d,e,f,g,h)}},this.event=function(a,b,c,d){if(gSmDebug.send(gSmDebug.DEBUGLEVEL_INPUT,a,b,gSmDebug.ACTIONNAME_EVENT,[c,d]),null!=a&&null!=b&&void 0!=a&&void 0!=b){this._getPlayer(a).event(b,c,d)}},this.closeStream=function(a,b,c){if(gSmDebug.send(gSmDebug.DEBUGLEVEL_INPUT,a,b,gSmDebug.ACTIONNAME_CLOSE_STREAM,[c]),null!=a&&null!=b&&void 0!=a&&void 0!=b){this._getPlayer(a).closeStream(b,c)}},this.checkAllStreams=function(){for(var a=0;a<this.playersArray.length;a++)if(this.playersArray[a].checkAllStreams())return!0;return!1},this.closeAllStreams=function(){for(var a=0;a<this.playersArray.length;a++)this.playersArray[a].closeAllStreams()},this.onUnload=function(){if(gemiusStream.checkAllStreams()){gemiusStream.closeAllStreams();for(var a=(new Date).getTime();a+200>(new Date).getTime(););}},this.viewId=function(){return this._viewId},this.newViewId=function(){return++this._viewId},this._getPlayer=function(a){for(var b=null,c=0;c<this.playersArray.length;c++)this.playersArray[c].playerId==a&&(b=this.playersArray[c]);return null==b&&(b=new gSmPlayer(a),this.playersArray.push(b)),b},this._timeCheck=function(){setTimeout("gemiusStream._timeCheck()",1e3),gSmUtil.getTimeSec()-gemiusStream._lastTimeCheck>=gSmConfig.TIMEOUT&&(gemiusStream._lastTimeCheck=gSmUtil.getTimeSec(),gSmDebug.send(gSmDebug.DEBUGLEVEL_LOG,"","",gSmDebug.ACTIONNAME_LOG,["timeCheck"]),this._sendAllStreams())},this._sendAllStreams=function(){for(var a=0;a<this.playersArray.length;a++)this.playersArray[a].sendAllStreams("time")},this.init()};