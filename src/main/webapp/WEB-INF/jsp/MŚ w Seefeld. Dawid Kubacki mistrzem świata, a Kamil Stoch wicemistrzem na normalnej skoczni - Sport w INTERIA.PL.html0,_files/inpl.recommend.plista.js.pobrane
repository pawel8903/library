!function(a,b,c,d){"use strict";var e=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},f={imageServerUrl:"i.iplsc.com",iframeHost:"ifr-lib.interia.pl",assetsHost:"js.iplsc.com",plistaLogo:"/inpl.recommend.plista/1.0.14/plista.png",plistaUrl:"https://www.plista.com/pl",optOutUrl:"https://www.plista.com/pl/opt-out"},g={},h=!1;a.fn.recommendPlista=function(d){function i(a,b,c){return"//"+f.imageServerUrl+"/"+a+"-"+b+"."+c}function j(c){var d={items:[],html:{listItems:"",list:""},style:"",hasAd:!1,firstAdIdx:null,secondAdIdx:null},e=new RegExp("(http|https)://([a-z.]*)/([a-z.-]*)/([A-Z0-9]*)-([A-Z0-9]*).([a-z]{3})"),g=null,h=null;return a.each(c,function(a,c){h=null,(g=e.exec(c.img))&&(h=g[4]);var f={attachment_ident:h,image:c.img,url:c.url,id:c.objectid,type:c.type,title:c.title,service_url:location.hostname,tracking_url:c.tracking_url,category:{url:c.category_url,name:c.category},plistaPosition:a+1,isAd:!1};"pet"==c.type&&(f.category.url="https://www.plista.com/pl/opt-out",f.category.name=v(b.location.host)?"Sponsorowane":"Reklama",f.isAd=!0,d.hasAd=!0,"number"!=typeof d.firstAdIdx?d.firstAdIdx=a:"number"!=typeof d.secondAdIdx&&(d.secondAdIdx=a)),d.items.push(f),d.html.listItems+=r(f,a)}),d.html.list+="<ul class='row plista-row'>"+d.html.listItems+"<a href="+f.plistaUrl+" target='_blank' style='background-image:url(//"+f.assetsHost+f.plistaLogo+"); height:17px; width:133px;position:absolute; top:0px; right:16px'></a><a href="+f.optOutUrl+" target='_blank' style='height:17px; width:15px;position:absolute; top:0px; right:16px' class=''></a></ul>",d.style+='<style type="text/css">.plista-row {position:relative; overflow:hidden; padding-top:20px;}</style>',d}function k(a){return a&&a.items&&a.items.length>0?"number"==typeof a.firstAdIdx?a.items[a.firstAdIdx]:a.items[0]:null}function l(a){return a&&a.items&&a.items.length>1?"number"==typeof a.secondAdIdx?a.items[a.secondAdIdx]:a.items[1]:null}function m(a){var c=j(a);c&&(v(b.location.host)?o(c):n(c))}function n(b){var c;a(y).append(b.html.list),a("head").append(b.style),c=jQuery(".plista-row",y),jQuery(".plista-row .brief-list-article").on("click",function(){s("plista","-","klik_art","link_"+jQuery(this).data().plistaPos)}),jQuery(".plista-row .brief-list-adv").on("click",function(){s("plista","-","klik_rekl","link_4")}),q(c)}function o(a){var b=k(a),c=l(a);p(b,{min:0,max:3}),p(c,{min:4,max:7})}function p(b,c){var d,f;b&&(c=c||{min:1,max:1},f=e(c.min,c.max),(d=a(y.selector+" ul li")[f])&&(d.innerHTML=r(b),d.dataset.plistaPos=b.plistaPosition,d.addEventListener("click",function(){s("plista","-",b.isAd?"klik_rekl":"klik_art","link_"+b.plistaPosition)}),q(d)))}function q(a){a&&jQuery(b).on("scroll.plista-recommend touchmove.plista-recommend gesturechange.plista-recommend",u(function(){return t(a)&&!1===A?(s("plista","-","view"),void(A=!0)):t(a)||!0!==A?void 0:void(A=!1)},20,y))}function r(a,b){var c="";"number"==typeof b&&(c+='<li data-plista-pos ="'+(b+1)+'" class="brief-list-item '+("pet"==a.type?"brief-list-adv":"brief-list-article")+" i"+b+' col-xs-6 every-xs-2 col-rs-6 every-rs-2 col-sm-3 every-sm-4 col-md-3 every-md-4 col-lg-3 every-lg-4">'),c+='<div class="tile-magazine">';var d="";return a.attachment_ident||(d=" tile-magazine-nothumb"),"pet"==a.type?c+='<a class="tile-magazine-thumb'+d+'" target="_blank" href="'+a.url+'">':c+='<a class="tile-magazine-thumb'+d+'" href="'+a.tracking_url+'">',a.attachment_ident?c+='<img src="'+i(a.attachment_ident,g.thumbImageType,g.thumbImageFormat)+'" class="tile-magazine-img img-responsive" alt="'+a.title+'">':c+='<img src="'+a.image+'" class="tile-magazine-img img-responsive" alt="'+a.title+'">',c+="</a>",c+='<div class="tile-magazine-header">',a.category&&a.category.url&&a.category.name&&(c+='<a class="tile-magazine-category" href="'+a.category.url+'">'+a.category.name+"</a>"),c+='<h2 class="tile-magazine-title header-font"><a class="tile-magazine-title-url" '+("pet"==a.type?'target="_blank"':"")+'href="'+("pet"==a.type?a.url:a.tracking_url)+'" title="'+a.title+'">',a.title&&(c+=a.title),c+="</a></h2>",c+="</div>",c+="</div>","number"==typeof b&&(c+="</li>"),c}function s(){if("undefined"!=typeof iwa){var a=Array.prototype.slice.call(arguments);a.unshift("trackEvent"),iwa.apply(iwa,a)}}function t(c){var d=a(b).scrollTop(),e=d+a(b).height(),f=a(c).offset().top;return f+a(c).height()<=e&&f>=d}function u(a,b,c){b||(b=500);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&g<d+b?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}function v(a){var b,c=["eurosport.interia.pl"],d=c.length;for(b=0;b<d;b++)if(a.indexOf(c[b])>-1)return!0;return!1}function w(){z||(z=c.createElement("iframe"),z.setAttribute("id","plista"),z.style.width="0px",z.style.height="0px",z.style.display="none",z.src="//"+f.iframeHost+"/iframe?s=plista&publickey="+g.publickey+"&widgetName="+g.widgetName+"&count="+g.count+"&host="+g.host),jQuery(c).ready(function(){c.body.appendChild(z)})}function x(){a(b).scrollTop()>200&&(w(),a(b).off("scroll.recommend-plista.start"))}var y=this,z=null,A=!1;g=d;var B=Math.max(c.documentElement.clientHeight,b.innerHeight||0);a(c).outerHeight()-200<B?w():a(b).on("scroll.recommend-plista.start",x),b.addEventListener("message",function(a){if(a.origin==location.protocol+"//"+f.iframeHost){var b=a.data;if("plista"!=b.sys||void 0===b.sys)return!1;void 0===b.data&&console.log("Inpl.Recommend.Plista: brak danych",b),h||(m(b.data),h=!0)}})}}(jQuery,window,document);